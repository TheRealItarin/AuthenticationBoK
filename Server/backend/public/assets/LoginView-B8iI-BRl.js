import{_ as g,l as _,c as u,b as s,h as d,j as b,i as p,e as r,v as m,d as L,w as k,r as f,t as c,o as l,f as y}from"./index-CPnzo6a5.js";const x={name:"LoginComponent",data(){return{username:"",password:"",success:null,errors:null}},methods:{async login(){this.success=null,this.errors=null;try{const o=await _(this.username,this.password);this.success=o,localStorage.setItem("token",o.token),localStorage.setItem("userRole",o.role),localStorage.setItem("username",o.username),window.dispatchEvent(new Event("userLoggedIn")),console.log("Login successful:",o)}catch(o){console.error("Login failed:",o),this.errors=o.details?.unauthorized||o.message}}}},V={class:"login-container"},C={class:"login-card"},S={class:"form-group"},h={class:"form-group"},B={class:"login-footer"},E={key:0,class:"alert alert-danger alert-visible"},I={key:1,class:"alert alert-success alert-visible"},D={class:"role-info"};function N(o,e,w,v,n,i){const a=f("router-link");return l(),u("div",V,[s("div",C,[e[8]||(e[8]=s("div",{class:"login-header"},[s("div",{class:"lock-icon"},"üîê"),s("h2",null,"Secure Login"),s("p",{class:"login-subtitle"},"Access Your Secure Documents")],-1)),s("form",{onSubmit:e[2]||(e[2]=b((...t)=>i.login&&i.login(...t),["prevent"])),class:"login-form"},[s("div",S,[e[3]||(e[3]=s("label",{for:"login-username"},[s("span",{class:"label-icon"},"üë§"),r(" Username ")],-1)),p(s("input",{type:"text",id:"login-username",name:"username","onUpdate:modelValue":e[0]||(e[0]=t=>n.username=t),required:"",autocomplete:"username",placeholder:"Enter your username",class:"form-control"},null,512),[[m,n.username]])]),s("div",h,[e[4]||(e[4]=s("label",{for:"login-password"},[s("span",{class:"label-icon"},"üîë"),r(" Password ")],-1)),p(s("input",{type:"password",id:"login-password",name:"password","onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t),required:"",autocomplete:"current-password",placeholder:"Enter your password",class:"form-control"},null,512),[[m,n.password]])]),e[5]||(e[5]=s("button",{type:"submit",class:"btn btn-primary btn-login"},[s("span"),r(" Login ")],-1))],32),s("div",B,[s("p",null,[e[7]||(e[7]=r("Don't have an account? ",-1)),L(a,{to:"/register"},{default:k(()=>[...e[6]||(e[6]=[r("Register here",-1)])]),_:1})])])]),n.errors?(l(),u("div",E,[e[9]||(e[9]=s("strong",null,"‚ö†Ô∏è Login Failed",-1)),s("p",null,c(n.errors),1)])):d("",!0),n.success?(l(),u("div",I,[e[11]||(e[11]=s("strong",null,"‚úì Welcome Back!",-1)),s("p",null,"Hello, "+c(n.success.username)+"!",1),s("p",D,[e[10]||(e[10]=s("strong",null,"Your Role:",-1)),r(" "+c(n.success.role),1)])])):d("",!0)])}const R=g(x,[["render",N],["__scopeId","data-v-72796521"]]),U={name:"LoginView",components:{LoginComponent:R}};function q(o,e,w,v,n,i){const a=f("LoginComponent");return l(),y(a)}const T=g(U,[["render",q]]);export{T as default};
